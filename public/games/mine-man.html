<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  
  <!-- Primary Meta Tags -->
  <title>Mine-Man - Minecraft Pac-Man Game | Andy's Epic Gaming Zone</title>
  <meta name='title' content='Mine-Man - Minecraft Pac-Man Game'>
  <meta name='description' content='Help Steve collect diamonds while avoiding Minecraft mobs in this epic maze adventure! A fun Minecraft-themed Pac-Man spoof perfect for kids.'>
  <meta name='keywords' content='minecraft pacman, mine-man, steve minecraft, minecraft game, maze game, kids game, minecraft mobs'>
  <meta name='robots' content='index, follow'>
  <meta name='language' content='English'>
  <meta name='author' content='Andy Fitzgerald'>
  
  <!-- Open Graph / Facebook -->
  <meta property='og:type' content='website'>
  <meta property='og:url' content='https://andy-fitzgerald.com/games/mine-man.html'>
  <meta property='og:title' content='Mine-Man - Minecraft Pac-Man Game'>
  <meta property='og:description' content='Help Steve collect diamonds while avoiding Minecraft mobs in this epic maze adventure! A fun Minecraft-themed Pac-Man spoof perfect for kids.'>
  <meta property='og:image' content='https://andy-fitzgerald.com/images/andy_my529.png'>
  <meta property='og:site_name' content='Andy\'s Epic Gaming Zone'>
  
  <!-- Twitter -->
  <meta property='twitter:card' content='summary_large_image'>
  <meta property='twitter:url' content='https://andy-fitzgerald.com/games/mine-man.html'>
  <meta property='twitter:title' content='Mine-Man - Minecraft Pac-Man Game'>
  <meta property='twitter:description' content='Help Steve collect diamonds while avoiding Minecraft mobs in this epic maze adventure! A fun Minecraft-themed Pac-Man spoof perfect for kids.'>
  <meta property='twitter:image' content='https://andy-fitzgerald.com/images/andy_my529.png'>
  
  <!-- Favicon -->
  <link rel='icon' type='image/png' href='/favicon.png'>
  <link rel='apple-touch-icon' href='/favicon.png'>
  
  <!-- Canonical URL -->
  <link rel='canonical' href='https://andy-fitzgerald.com/games/mine-man.html'>
  
  <!-- Stylesheets -->
  <link rel='stylesheet' href='../css/styles.css'>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Game",
    "name": "Mine-Man",
    "description": "Help Steve collect diamonds while avoiding Minecraft mobs in this epic maze adventure! A fun Minecraft-themed Pac-Man spoof perfect for kids.",
    "url": "https://andy-fitzgerald.com/games/mine-man.html",
    "genre": "Arcade",
    "gamePlatform": "Web Browser",
    "operatingSystem": "Any",
    "applicationCategory": "Game",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Andy Fitzgerald"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Andy's Epic Gaming Zone",
      "url": "https://andy-fitzgerald.com"
    },
    "isPartOf": {
      "@type": "WebSite",
      "name": "Andy's Epic Gaming Zone",
      "url": "https://andy-fitzgerald.com"
    }
  }
  </script>
</head>
<body>
  <a href="../index.html" class="back-button">üè† Back to Gaming Zone</a>
  
  <div class="game-header">
    <h1>‚õèÔ∏è MINE-MAN ‚õèÔ∏è</h1>
  </div>
  
  <div class="main-wrapper">
    <!-- Left Sidebar -->
    <div class="sidebar">
      <img src="../images/andy_my529.png" alt="Andy's 529 Plan" class="sidebar-image">
      <a href="https://gift.my529.org/LPXR40" target="_blank" class="donate-link">Donate to Andy</a>
    </div>
    
    <div class="content-wrapper">
      <div class="game-container">
      
      <div class="game-info">
        <div class="info-item score">
          SCORE: <span id="score">0</span>
        </div>
        <div class="info-item level">
          LEVEL: <span id="level">1</span>
        </div>
        <div class="info-item lives">
          LIVES: <span id="lives">3</span>
        </div>
      </div>
      
      <canvas id="gameCanvas" class="game-canvas" width="600" height="600"></canvas>
      
      <div class="controls">
        <button class="game-button" onclick="startGame()">üéÆ START GAME</button>
        <button class="game-button" onclick="pauseGame()">‚è∏Ô∏è PAUSE</button>
        <button class="game-button" onclick="resetGame()">üîÑ RESET</button>
        <button class="game-button" onclick="showLeaderboard()">üèÜ LEADERBOARD</button>
      </div>
      
      <div class="instructions">
        <h3>üéÆ HOW TO PLAY</h3>
        <p><strong>‚õèÔ∏è Objective:</strong> Guide Steve through the mine, collect all diamonds while avoiding Minecraft mobs!</p>
        <p><strong>üéÆ Controls:</strong> Use ARROW KEYS or WASD to move Steve around the maze</p>
        <p><strong>üíé Collect:</strong> Small diamonds (10 points) and large emeralds (50 points + temporary invincibility)</p>
        <p><strong>üëæ Avoid:</strong> Minecraft mobs - they'll hurt Steve! Use emeralds to fight back!</p>
        
        <div class="mob-info">
          <div class="mob-card">
            <div class="mob-name zombie">üßü ZOMBIE</div>
            <div>Slow but persistent</div>
          </div>
          <div class="mob-card">
            <div class="mob-name enderman">üë§ ENDERMAN</div>
            <div>Teleports randomly</div>
          </div>
          <div class="mob-card">
            <div class="mob-name creeper">üíö CREEPER</div>
            <div>Fast and aggressive</div>
          </div>
          <div class="mob-card">
            <div class="mob-name drowned">üåä DROWNED</div>
            <div>Unpredictable movement</div>
          </div>
        </div>
      </div>
    </div>
    </div>
    
    <!-- Right Sidebar -->
    <div class="sidebar">
      <img src="../images/andy_my529.png" alt="Andy's 529 Plan" class="sidebar-image">
      <a href="https://gift.my529.org/LPXR40" target="_blank" class="donate-link">Donate to Andy</a>
    </div>
  </div>

  <div class="game-start" id="gameStart">
    <h2>‚õèÔ∏è MINE-MAN ‚õèÔ∏è</h2>
    <p>Help Steve collect all the diamonds!</p>
    <p>Avoid the Minecraft mobs and use emeralds for power!</p>
    <button class="game-button" onclick="startGame()">üéÆ START MINING!</button>
  </div>

  <div class="game-over" id="gameOver" style="display: none;">
    <h2 id="gameOverTitle">üíÄ GAME OVER! üíÄ</h2>
    <p id="gameOverText">Steve was defeated by the mobs!</p>
    <p>Final Score: <span id="finalScore">0</span></p>
    <button class="game-button" onclick="resetGame()">üîÑ TRY AGAIN</button>
  </div>

  <!-- Leaderboard Modal -->
  <div class="leaderboard" id="leaderboard">
    <h2>üèÜ MINE-MAN LEADERBOARD üèÜ</h2>
    <div class="leaderboard-list" id="leaderboardList">
      <!-- Leaderboard entries will be populated here -->
    </div>
    <button class="game-button" onclick="hideLeaderboard()">‚úñÔ∏è CLOSE</button>
  </div>

  <!-- High Score Input Modal -->
  <div class="high-score-input" id="highScoreInput" style="display: none;">
    <h2>üèÜ NEW HIGH SCORE! üèÜ</h2>
    <p>Congratulations! You made it to the leaderboard!</p>
    <p>Score: <span id="newHighScore">0</span> | Level: <span id="newHighLevel">1</span></p>
    <input type="text" id="playerName" placeholder="Enter your name" maxlength="15" style="padding: 0.5rem; margin: 1rem; border-radius: 5px; border: 1px solid #4ecdc4; background: rgba(0,0,0,0.8); color: white; text-align: center;">
    <br>
    <button class="game-button" onclick="submitScore()">üèÜ SUBMIT SCORE</button>
  </div>

  <script>
    // Game variables
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    let gameState = 'start';
    let score = 0;
    let level = 1;
    let lives = 3;
    let gameLoop = null;
    
    const GRID_SIZE = 20;
    const COLS = canvas.width / GRID_SIZE;
    const ROWS = canvas.height / GRID_SIZE;
    
    // Player (Steve)
    let player = {
      x: 1,
      y: 1,
      direction: 'right',
      nextDirection: 'right',
      invincible: false,
      invincibleTime: 0
    };
    
    // Mobs
    let mobs = [];
    let diamonds = [];
    let emeralds = [];
    let maze = [];
    
    // 5 different maze layouts with progressive difficulty
    const mazePatterns = {
      1: [ // Level 1 - Simple and open
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,3,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,3,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,1,1,2,2,2,2,2,1,1,2,1,1,2,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2],
      [1,1,1,1,1,1,2,1,1,2,1,2,2,2,2,2,2,2,1,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2,1],
      [1,3,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,3,2,1],
      [1,1,2,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,2,1,1],
      [1,2,2,2,2,2,2,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    2: [ // Level 2 - More complex
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,3,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,3,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1],
      [1,2,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,1,1,2,2,2,2,2,1,1,2,1,1,2,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2],
      [1,1,1,1,1,1,2,1,1,2,1,2,2,2,2,2,2,2,1,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2,1],
      [1,3,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,3,2,1],
      [1,2,2,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,1,2,1,1],
      [1,2,2,2,2,2,2,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    3: [ // Level 3 - Complex
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,3,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,3,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1],
      [1,2,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],
      [1,2,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,2,1,1,2,1,1,2,2,2,2,2,1,1,2,1,1,2,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2],
      [1,1,1,1,1,1,2,1,1,2,1,2,2,2,2,2,2,2,1,2,1,1,2,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,1,1,2,1,1,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,1,1,2,1],
      [1,2,1,2,2,2,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,2,2,2,2,1,2,2,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,1,2,1,1],
      [1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,2,2,1],
      [1,3,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,3,1,1],
      [1,2,2,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,2,2,1],
      [1,2,2,2,2,2,2,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1],
      [1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    4: [ // Level 4 - Advanced
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,3,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,3,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1],
      [1,2,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,2,1],
      [1,2,1,2,1,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,1,2,1,2,1],
      [1,2,1,2,1,2,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,2,1,2,1,2,1,1],
      [1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,1,1],
      [1,2,1,2,1,1,1,1,1,2,1,1,2,2,2,2,2,1,1,2,1,1,1,1,1,2,1,2,1,1],
      [1,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,1,1],
      [1,2,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,1,2,1,1,1,1,1,1,1,2,1,1],
      [1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1],
      [1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,1,1],
      [1,2,1,1,1,1,1,1,1,2,2,2,2,1,1,1,2,2,2,2,1,1,1,1,1,1,1,2,1,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,1,2,1,1],
      [1,3,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,3,1,1],
      [1,2,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,2,2,1,2,1],
      [1,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,1,2,1],
      [1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    5: [ // Level 5+ - Expert (repeats for level 5+)
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,3,1,1,1,1,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,2,1,1,1,1,3,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1],
      [1,2,1,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2,1,2,1],
      [1,2,1,2,1,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,1,2,1,2,1],
      [1,2,1,2,1,2,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,2,1,2,1,2,1,1],
      [1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,1,1],
      [1,2,1,2,1,1,1,1,1,2,1,1,2,2,2,2,2,1,1,2,1,1,1,1,1,2,1,2,1,1],
      [1,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,1,1],
      [1,2,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,1,2,1,1,1,1,1,1,1,2,1,1],
      [1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1],
      [1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1],
      [1,2,2,2,2,2,2,2,2,2,1,1,2,1,1,1,2,1,1,2,2,2,2,2,2,2,2,2,1,1],
      [1,2,1,1,1,1,1,1,1,2,2,2,2,1,1,1,2,2,2,2,1,1,1,1,1,1,1,2,1,1],
      [1,2,1,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,1,2,1,1],
      [1,3,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,3,1,1],
      [1,2,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,2,2,1,2,1],
      [1,2,1,2,2,2,2,1,2,2,2,2,2,1,1,1,2,2,2,2,2,1,2,2,2,2,2,1,2,1],
      [1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
      [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ]
  };
    
    function initGame() {
      createMaze();
      resetPlayer();
      createMobs();
      updateUI();
    }
    
    function createMaze() {
      maze = [];
      diamonds = [];
      emeralds = [];
      
      // Use appropriate maze pattern based on level (max level 5)
      const currentLevel = Math.min(level, 5);
      const currentMazePattern = mazePatterns[currentLevel];
      
      for (let row = 0; row < ROWS; row++) {
        maze[row] = [];
        for (let col = 0; col < COLS; col++) {
          if (row < currentMazePattern.length && col < currentMazePattern[row].length) {
            maze[row][col] = currentMazePattern[row][col];
            if (currentMazePattern[row][col] === 2) {
              diamonds.push({ x: col, y: row });
            } else if (currentMazePattern[row][col] === 3) {
              emeralds.push({ x: col, y: row });
            }
          } else {
            maze[row][col] = 1;
          }
        }
      }
    }
    
    function resetPlayer() {
      player = {
        x: 1,
        y: 1,
        direction: 'right',
        nextDirection: 'right',
        invincible: false,
        invincibleTime: 0
      };
    }
    
    function createMobs() {
      mobs = [
        { x: 13, y: 13, direction: 'up', type: 'zombie', color: '#90EE90', speed: 0.8, moveCounter: 0, spawnX: 13, spawnY: 13 },
        { x: 15, y: 13, direction: 'down', type: 'enderman', color: '#800080', speed: 1.0, moveCounter: 0, spawnX: 15, spawnY: 13 },
        { x: 13, y: 15, direction: 'left', type: 'creeper', color: '#32CD32', speed: 1.2, moveCounter: 0, spawnX: 13, spawnY: 15 },
        { x: 15, y: 15, direction: 'right', type: 'drowned', color: '#4682B4', speed: 1.0, moveCounter: 0, spawnX: 15, spawnY: 15 }
      ];
    }
    
    function canMoveTo(x, y) {
      if (x < 0 || x >= COLS || y < 0 || y >= ROWS) return false;
      return maze[y][x] !== 1;
    }
    
    function updatePlayer() {
      let newX = player.x;
      let newY = player.y;
      
      switch (player.nextDirection) {
        case 'up': newY--; break;
        case 'down': newY++; break;
        case 'left': newX--; break;
        case 'right': newX++; break;
      }
      
      if (canMoveTo(newX, newY)) {
        player.direction = player.nextDirection;
        player.x = newX;
        player.y = newY;
      }
      
      if (player.invincible) {
        player.invincibleTime--;
        if (player.invincibleTime <= 0) {
          player.invincible = false;
        }
      }
      
      // Collect diamonds
      for (let i = diamonds.length - 1; i >= 0; i--) {
        if (diamonds[i].x === player.x && diamonds[i].y === player.y) {
          diamonds.splice(i, 1);
          score += 10;
          updateUI();
        }
      }
      
      // Collect emeralds
      for (let i = emeralds.length - 1; i >= 0; i--) {
        if (emeralds[i].x === player.x && emeralds[i].y === player.y) {
          emeralds.splice(i, 1);
          score += 50;
          player.invincible = true;
          player.invincibleTime = 300;
          updateUI();
        }
      }
      
      if (diamonds.length === 0 && emeralds.length === 0) {
        nextLevel();
      }
    }
    
    function updateMobs() {
      mobs.forEach(mob => {
        mob.moveCounter += mob.speed;
        if (mob.moveCounter >= 10) {
          mob.moveCounter = 0;
          
          const directions = ['up', 'down', 'left', 'right'];
          let possibleMoves = [];
          
          directions.forEach(dir => {
            let newX = mob.x;
            let newY = mob.y;
            
            switch (dir) {
              case 'up': newY--; break;
              case 'down': newY++; break;
              case 'left': newX--; break;
              case 'right': newX++; break;
            }
            
            if (canMoveTo(newX, newY)) {
              possibleMoves.push({ dir, x: newX, y: newY });
            }
          });
          
          if (possibleMoves.length > 0) {
            if (mob.type === 'enderman' && Math.random() < 0.05) {
              // Enderman teleport
              let attempts = 0;
              while (attempts < 20) {
                const newX = Math.floor(Math.random() * COLS);
                const newY = Math.floor(Math.random() * ROWS);
                if (canMoveTo(newX, newY)) {
                  mob.x = newX;
                  mob.y = newY;
                  break;
                }
                attempts++;
              }
            } else {
              // Normal movement
              if (Math.random() < 0.7) {
                // Move toward player
                const playerDist = possibleMoves.map(move => {
                  const dx = move.x - player.x;
                  const dy = move.y - player.y;
                  return { ...move, dist: Math.sqrt(dx * dx + dy * dy) };
                });
                
                playerDist.sort((a, b) => a.dist - b.dist);
                const move = playerDist[0];
                mob.x = move.x;
                mob.y = move.y;
                mob.direction = move.dir;
              } else {
                // Random movement
                const move = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
                mob.x = move.x;
                mob.y = move.y;
                mob.direction = move.dir;
              }
            }
          }
        }
        
        // Check collision with player
        if (mob.x === player.x && mob.y === player.y) {
          if (player.invincible) {
            // Send mob back to spawn position
            mob.x = mob.spawnX;
            mob.y = mob.spawnY;
            mob.direction = 'up'; // Reset direction
            mob.moveCounter = 0; // Reset movement counter
            score += 100;
            updateUI();
          } else {
            // Player loses life
            lives--;
            updateUI();
            if (lives <= 0) {
              gameOver();
            } else {
              resetPlayer();
            }
          }
        }
      });
    }
    
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      drawMaze();
      drawDiamonds();
      drawEmeralds();
      drawPlayer();
      drawMobs();
      drawInvincibilityTimer();
    }
    
    function drawInvincibilityTimer() {
      if (player.invincible && player.invincibleTime > 0) {
        const barWidth = 200;
        const barHeight = 8;
        const x = (canvas.width - barWidth) / 2;
        const y = 10;
        
        // Background bar
        ctx.fillStyle = '#333333';
        ctx.fillRect(x, y, barWidth, barHeight);
        
        // Timer bar
        const timePercent = player.invincibleTime / 300; // 300 is max time
        const currentWidth = barWidth * timePercent;
        
        // Color changes based on time left
        if (timePercent > 0.5) {
          ctx.fillStyle = '#00FF00'; // Green when safe
        } else if (timePercent > 0.2) {
          ctx.fillStyle = '#FFFF00'; // Yellow when warning
        } else {
          ctx.fillStyle = '#FF0000'; // Red when critical
        }
        
        ctx.fillRect(x, y, currentWidth, barHeight);
        
        // Border
        ctx.strokeStyle = '#FFFFFF';
        ctx.lineWidth = 1;
        ctx.strokeRect(x, y, barWidth, barHeight);
        
        // Text
        ctx.fillStyle = '#FFFFFF';
        ctx.font = '12px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('POWER TIME', x + barWidth / 2, y + barHeight + 15);
      }
    }
    
    function drawMaze() {
      for (let row = 0; row < ROWS; row++) {
        for (let col = 0; col < COLS; col++) {
          const x = col * GRID_SIZE;
          const y = row * GRID_SIZE;
          
          if (maze[row][col] === 1) {
            ctx.fillStyle = '#666666';
            ctx.fillRect(x, y, GRID_SIZE, GRID_SIZE);
            ctx.strokeStyle = '#444444';
            ctx.lineWidth = 1;
            ctx.strokeRect(x, y, GRID_SIZE, GRID_SIZE);
          } else {
            ctx.fillStyle = '#000000';
            ctx.fillRect(x, y, GRID_SIZE, GRID_SIZE);
          }
        }
      }
    }
    
    function drawDiamonds() {
      ctx.fillStyle = '#00FFFF';
      diamonds.forEach(diamond => {
        const x = diamond.x * GRID_SIZE + GRID_SIZE / 2;
        const y = diamond.y * GRID_SIZE + GRID_SIZE / 2;
        
        ctx.beginPath();
        ctx.arc(x, y, 3, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = '#FFFFFF';
        ctx.beginPath();
        ctx.arc(x - 1, y - 1, 1, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#00FFFF';
      });
    }
    
    function drawEmeralds() {
      emeralds.forEach(emerald => {
        const x = emerald.x * GRID_SIZE + GRID_SIZE / 2;
        const y = emerald.y * GRID_SIZE + GRID_SIZE / 2;
        
        const pulse = Math.sin(Date.now() * 0.01) * 2 + 8;
        
        ctx.fillStyle = '#00FF00';
        ctx.beginPath();
        ctx.arc(x, y, pulse, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = '#FFFFFF';
        ctx.beginPath();
        ctx.arc(x, y, pulse - 3, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.fillStyle = '#00FF00';
        ctx.beginPath();
        ctx.arc(x, y, pulse - 5, 0, Math.PI * 2);
        ctx.fill();
      });
    }
    
    function drawPlayer() {
      const x = player.x * GRID_SIZE + GRID_SIZE / 2;
      const y = player.y * GRID_SIZE + GRID_SIZE / 2;
      
      // Steve's head
      ctx.fillStyle = player.invincible ? '#FFFF00' : '#8B4513';
      ctx.fillRect(x - 8, y - 8, 16, 16);
      
      // Face
      ctx.fillStyle = player.invincible ? '#FFFF88' : '#FDBCB4';
      ctx.fillRect(x - 6, y - 6, 12, 12);
      
      // Eyes
      ctx.fillStyle = '#000000';
      ctx.fillRect(x - 4, y - 4, 2, 2);
      ctx.fillRect(x + 2, y - 4, 2, 2);
      
      // Mouth
      switch (player.direction) {
        case 'right': ctx.fillRect(x + 2, y, 2, 2); break;
        case 'left': ctx.fillRect(x - 4, y, 2, 2); break;
        case 'up': ctx.fillRect(x - 1, y - 2, 2, 2); break;
        case 'down': ctx.fillRect(x - 1, y + 2, 2, 2); break;
      }
    }
    
    function drawMobs() {
      mobs.forEach(mob => {
        const x = mob.x * GRID_SIZE + GRID_SIZE / 2;
        const y = mob.y * GRID_SIZE + GRID_SIZE / 2;
        
        // Determine mob color based on invincibility state
        let mobColor = mob.color;
        let isFlashing = false;
        
        if (player.invincible) {
          if (player.invincibleTime > 60) {
            // Safe blue color when plenty of time left
            mobColor = '#0000FF';
          } else {
            // Flash between blue and original color when time is running out
            isFlashing = true;
            mobColor = Math.floor(Date.now() / 200) % 2 === 0 ? '#0000FF' : mob.color;
          }
        }
        
        ctx.fillStyle = mobColor;
        
        switch (mob.type) {
          case 'zombie':
            ctx.fillRect(x - 8, y - 8, 16, 16);
            ctx.fillStyle = player.invincible && !isFlashing ? '#4444FF' : '#654321';
            if (isFlashing && Math.floor(Date.now() / 200) % 2 === 0) {
              ctx.fillStyle = '#4444FF';
            }
            ctx.fillRect(x - 6, y - 6, 12, 8);
            break;
          case 'enderman':
            ctx.fillRect(x - 6, y - 10, 12, 20);
            ctx.fillStyle = player.invincible && !isFlashing ? '#FF88FF' : '#FF00FF';
            if (isFlashing && Math.floor(Date.now() / 200) % 2 === 0) {
              ctx.fillStyle = '#FF88FF';
            }
            ctx.fillRect(x - 4, y - 8, 2, 2);
            ctx.fillRect(x + 2, y - 8, 2, 2);
            break;
          case 'creeper':
            ctx.fillRect(x - 8, y - 8, 16, 16);
            ctx.fillStyle = '#000000';
            ctx.fillRect(x - 6, y - 6, 3, 3);
            ctx.fillRect(x + 3, y - 6, 3, 3);
            ctx.fillRect(x - 2, y - 2, 4, 6);
            break;
          case 'drowned':
            ctx.fillRect(x - 8, y - 8, 16, 16);
            ctx.fillStyle = player.invincible && !isFlashing ? '#AACCEE' : '#87CEEB';
            if (isFlashing && Math.floor(Date.now() / 200) % 2 === 0) {
              ctx.fillStyle = '#AACCEE';
            }
            ctx.fillRect(x - 6, y - 6, 12, 8);
            break;
        }
        
        // Eyes color based on state
        if (player.invincible) {
          ctx.fillStyle = isFlashing && Math.floor(Date.now() / 200) % 2 === 1 ? '#FF0000' : '#FFFFFF';
        } else {
          ctx.fillStyle = '#FF0000';
        }
        ctx.fillRect(x - 4, y - 6, 2, 2);
        ctx.fillRect(x + 2, y - 6, 2, 2);
        
        // Add warning indicator when flashing
        if (isFlashing) {
          ctx.fillStyle = '#FFFF00';
          ctx.font = '12px Arial';
          ctx.textAlign = 'center';
          ctx.fillText('!', x, y - 12);
        }
      });
    }
    
    function updateUI() {
      document.getElementById('score').textContent = score;
      document.getElementById('level').textContent = level;
      document.getElementById('lives').textContent = lives;
    }
    
    function nextLevel() {
      level++;
      score += 100;
      createMaze();
      resetPlayer();
      mobs.forEach(mob => {
        mob.speed += 0.1;
      });
      updateUI();
    }
    
    function gameOver() {
      gameState = 'gameOver';
      if (gameLoop) clearInterval(gameLoop);
      
      // Check if score qualifies for leaderboard
      if (isHighScore(score)) {
        document.getElementById('newHighScore').textContent = score;
        document.getElementById('newHighLevel').textContent = level;
        document.getElementById('playerName').value = '';
        document.getElementById('highScoreInput').style.display = 'block';
      } else {
        document.getElementById('finalScore').textContent = score;
        document.getElementById('gameOver').style.display = 'block';
      }
    }
    
    function startGame() {
      if (gameState === 'start' || gameState === 'gameOver') {
        score = 0;
        level = 1;
        lives = 3;
        initGame();
      }
      
      gameState = 'playing';
      document.getElementById('gameStart').style.display = 'none';
      document.getElementById('gameOver').style.display = 'none';
      
      if (gameLoop) clearInterval(gameLoop);
      gameLoop = setInterval(() => {
        if (gameState === 'playing') {
          updatePlayer();
          updateMobs();
          draw();
        }
      }, 100);
    }
    
    function pauseGame() {
      if (gameState === 'playing') {
        gameState = 'paused';
        if (gameLoop) clearInterval(gameLoop);
      } else if (gameState === 'paused') {
        gameState = 'playing';
        gameLoop = setInterval(() => {
          if (gameState === 'playing') {
            updatePlayer();
            updateMobs();
            draw();
          }
        }, 100);
      }
    }
    
    function resetGame() {
      gameState = 'start';
      if (gameLoop) clearInterval(gameLoop);
      score = 0;
      level = 1;
      lives = 3;
      initGame();
      draw();
      document.getElementById('gameStart').style.display = 'block';
      document.getElementById('gameOver').style.display = 'none';
    }
    
    // Controls
    document.addEventListener('keydown', (e) => {
      if (gameState !== 'playing') return;
      
      switch (e.key) {
        case 'ArrowUp':
        case 'w':
        case 'W':
          player.nextDirection = 'up';
          e.preventDefault();
          break;
        case 'ArrowDown':
        case 's':
        case 'S':
          player.nextDirection = 'down';
          e.preventDefault();
          break;
        case 'ArrowLeft':
        case 'a':
        case 'A':
          player.nextDirection = 'left';
          e.preventDefault();
          break;
        case 'ArrowRight':
        case 'd':
        case 'D':
          player.nextDirection = 'right';
          e.preventDefault();
          break;
      }
    });
    
    // Leaderboard system
    let leaderboard = [];
    let newScoreIndex = -1;
    
    // Leaderboard functions
    function loadLeaderboard() {
      const saved = localStorage.getItem('mineManLeaderboard');
      if (saved) {
        leaderboard = JSON.parse(saved);
      } else {
        // Initialize with default scores
        leaderboard = [
          {name: 'DIAMOND MINER', score: 5000, level: 10},
          {name: 'STEVE MASTER', score: 4000, level: 8},
          {name: 'EMERALD HUNTER', score: 3500, level: 7},
          {name: 'MOB SLAYER', score: 3000, level: 6},
          {name: 'CAVE EXPLORER', score: 2500, level: 5},
          {name: 'BLOCK BREAKER', score: 2000, level: 4},
          {name: 'MINE RUNNER', score: 1500, level: 3},
          {name: 'CRAFT HERO', score: 1000, level: 2},
          {name: 'PIXEL PLAYER', score: 750, level: 2},
          {name: 'NOOB MINER', score: 500, level: 1}
        ];
        saveLeaderboard();
      }
    }
    
    function saveLeaderboard() {
      localStorage.setItem('mineManLeaderboard', JSON.stringify(leaderboard));
    }
    
    function isHighScore(score) {
      return leaderboard.length < 10 || score > leaderboard[leaderboard.length - 1].score;
    }
    
    function addToLeaderboard(name, score, level) {
      const entry = {name: name.toUpperCase(), score: score, level: level};
      leaderboard.push(entry);
      leaderboard.sort((a, b) => b.score - a.score);
      
      if (leaderboard.length > 10) {
        leaderboard = leaderboard.slice(0, 10);
      }
      
      newScoreIndex = leaderboard.findIndex(e => e.name === entry.name && e.score === entry.score && e.level === entry.level);
      saveLeaderboard();
    }
    
    function showLeaderboard() {
      displayLeaderboard();
      document.getElementById('leaderboard').style.display = 'block';
    }
    
    function hideLeaderboard() {
      document.getElementById('leaderboard').style.display = 'none';
    }
    
    function displayLeaderboard() {
      const listElement = document.getElementById('leaderboardList');
      listElement.innerHTML = '';
      
      if (leaderboard.length === 0) {
        listElement.innerHTML = '<p>No scores yet!</p>';
        return;
      }
      
      leaderboard.forEach((entry, index) => {
        const entryDiv = document.createElement('div');
        entryDiv.className = 'leaderboard-entry';
        if (index === newScoreIndex) {
          entryDiv.classList.add('new-score');
        }
        
        const rank = index + 1;
        let medal = '';
        if (rank === 1) medal = 'ü•á';
        else if (rank === 2) medal = 'ü•à';
        else if (rank === 3) medal = 'ü•â';
        else medal = `${rank}.`;
        
        entryDiv.innerHTML = `
          <span>${medal} ${entry.name}</span>
          <span>Level ${entry.level} - ${entry.score.toLocaleString()} pts</span>
        `;
        
        listElement.appendChild(entryDiv);
      });
    }
    
    function submitScore() {
      const name = document.getElementById('playerName').value.trim();
      if (!name) {
        alert('Please enter your name!');
        return;
      }
      
      addToLeaderboard(name, score, level);
      document.getElementById('highScoreInput').style.display = 'none';
      showLeaderboard();
    }
    
    // Initialize
    loadLeaderboard();
    initGame();
    draw();
  </script>
</body>
</html>
